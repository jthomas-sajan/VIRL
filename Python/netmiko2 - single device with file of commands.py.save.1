#!/usr/bin/env python
 
from netmiko import ConnectHandler

with open('commands_file') as f:
    commands_list = f.read().splitlines()
 
for devices in devices_list:
    print 'Connecting to device" ' + devices
    ip_address_of_device = devices
    ios_device = {
        'device_type': 'cisco_ios',
        'ip': ip_address_of_device, 
        'username': 'james',
        'password': 'cisco'
    } 
net_connect = ConnectHandler(**iosv_device)
output = net_connect.send_config_set(commands_list)
print(output)
